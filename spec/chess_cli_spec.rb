# frozen_string_literal: true

RSpec.describe ChessCli do
  it "has a version number" do
    expect(ChessCli::VERSION).not_to be nil
  end

  it "displays a chess board" do
    app = ChessCli.start

    game_id = app.start_game

    expect(app.print_game(game_id, :white)).to eq(<<~TEXT)
        +---+---+---+---+---+---+---+---+
      8 | ♖ | ♘ | ♗ | ♕ | ♔ | ♗ | ♘ | ♖ |
        |---+---+---+---+---+---+---+---|
      7 | ♙ | ♙ | ♙ | ♙ | ♙ | ♙ | ♙ | ♙ |
        |---+---+---+---+---+---+---+---|
      6 |   |   |   |   |   |   |   |   |
        |---+---+---+---+---+---+---+---|
      5 |   |   |   |   |   |   |   |   |
        |---+---+---+---+---+---+---+---|
      4 |   |   |   |   |   |   |   |   |
        |---+---+---+---+---+---+---+---|
      3 |   |   |   |   |   |   |   |   |
        |---+---+---+---+---+---+---+---|
      2 | ♟ | ♟ | ♟ | ♟ | ♟ | ♟ | ♟ | ♟ |
        |---+---+---+---+---+---+---+---|
      1 | ♜ | ♞ | ♝ | ♛ | ♚ | ♝ | ♞ | ♜ |
        +---+---+---+---+---+---+---+---+
          a   b   c   d   e   f   g   h
    TEXT

    expect(app.print_game(game_id, :black)).to eq(<<~TEXT)
        +---+---+---+---+---+---+---+---+
      1 | ♜ | ♞ | ♝ | ♚ | ♛ | ♝ | ♞ | ♜ |
        |---+---+---+---+---+---+---+---|
      2 | ♟ | ♟ | ♟ | ♟ | ♟ | ♟ | ♟ | ♟ |
        |---+---+---+---+---+---+---+---|
      3 |   |   |   |   |   |   |   |   |
        |---+---+---+---+---+---+---+---|
      4 |   |   |   |   |   |   |   |   |
        |---+---+---+---+---+---+---+---|
      5 |   |   |   |   |   |   |   |   |
        |---+---+---+---+---+---+---+---|
      6 |   |   |   |   |   |   |   |   |
        |---+---+---+---+---+---+---+---|
      7 | ♙ | ♙ | ♙ | ♙ | ♙ | ♙ | ♙ | ♙ |
        |---+---+---+---+---+---+---+---|
      8 | ♖ | ♘ | ♗ | ♔ | ♕ | ♗ | ♘ | ♖ |
        +---+---+---+---+---+---+---+---+
          h   g   f   e   d   c   b   a
    TEXT

    app.move_piece(game_id, :d2, :d4)

    expect(app.print_game(game_id, :white)).to eq(<<~TEXT)
        +---+---+---+---+---+---+---+---+
      8 | ♖ | ♘ | ♗ | ♕ | ♔ | ♗ | ♘ | ♖ |
        |---+---+---+---+---+---+---+---|
      7 | ♙ | ♙ | ♙ | ♙ | ♙ | ♙ | ♙ | ♙ |
        |---+---+---+---+---+---+---+---|
      6 |   |   |   |   |   |   |   |   |
        |---+---+---+---+---+---+---+---|
      5 |   |   |   |   |   |   |   |   |
        |---+---+---+---+---+---+---+---|
      4 |   |   |   | ♟ |   |   |   |   |
        |---+---+---+---+---+---+---+---|
      3 |   |   |   |   |   |   |   |   |
        |---+---+---+---+---+---+---+---|
      2 | ♟ | ♟ | ♟ |   | ♟ | ♟ | ♟ | ♟ |
        |---+---+---+---+---+---+---+---|
      1 | ♜ | ♞ | ♝ | ♛ | ♚ | ♝ | ♞ | ♜ |
        +---+---+---+---+---+---+---+---+
          a   b   c   d   e   f   g   h
    TEXT
  end
end
